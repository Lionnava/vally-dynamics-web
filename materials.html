<!-- LIBRERÍA NGL -->
    <script src="https://unpkg.com/ngl@0.10.4-1/dist/ngl.js"></script>
    <script>
        // Lógica de Idioma
        function setLanguage(lang) {
            const enElements = document.querySelectorAll('.lang-en');
            const esElements = document.querySelectorAll('.lang-es');
            const btnEn = document.getElementById('btn-en');
            const btnEs = document.getElementById('btn-es');
            if (lang === 'es') {
                enElements.forEach(el => el.classList.add('lang-hidden'));
                esElements.forEach(el => el.classList.remove('lang-hidden'));
                btnEs.classList.add('text-emerald-700', 'border-b-2', 'border-emerald-700');
                btnEs.classList.remove('text-gray-400');
                btnEn.classList.remove('text-emerald-700', 'border-b-2', 'border-emerald-700');
                btnEn.classList.add('text-gray-400');
            } else {
                esElements.forEach(el => el.classList.add('lang-hidden'));
                enElements.forEach(el => el.classList.remove('lang-hidden'));
                btnEn.classList.add('text-emerald-700', 'border-b-2', 'border-emerald-700');
                btnEn.classList.remove('text-gray-400');
                btnEs.classList.remove('text-emerald-700', 'border-b-2', 'border-emerald-700');
                btnEs.classList.add('text-gray-400');
            }
        }

        // Lógica del Visor 3D para Materiales
        document.addEventListener("DOMContentLoaded", function () {
            var stage = new NGL.Stage("viewport", { backgroundColor: "#0f172a" });

            function renderMaterial(structure) {
                // Representación de alta gama para nanomateriales
                structure.addRepresentation("ball+stick", { 
                    color: "#10b981", 
                    multipleBond: "symmetric",
                    sphereDetail: 2,
                    aspectRatio: 2.0
                });
                structure.autoView();
                stage.setSpin(true); // Rotación para ver la simetría
            }

            // CARGA DEL MODELO OFICIAL C60
            stage.loadFile("nanomaterial.pdb").then(renderMaterial)
            .catch(() => stage.loadFile("https://files.rcsb.org/download/1FBB.pdb").then(renderMaterial))
            .catch(err => {
                console.error("Materials Load Error:", err);
                document.getElementById("viewport").innerHTML = '<p class="text-white text-[10px] p-10 text-center uppercase opacity-50">Nanostructure data offline. <br> Initializing Vally-Link...</p>';
            });

            window.addEventListener("resize", function() { stage.handleResize(); }, false);
        });
    </script>
